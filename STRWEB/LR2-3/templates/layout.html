{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/media/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/media/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/media/images/favicon-16x16.png">
    <link rel="manifest" href="/media/images/site.webmanifest">
    <link rel="mask-icon" href="/media/images/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/media/images/favicon.ico">
   
    <title>{% block title %}  {% endblock %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="{% static 'css/style.css' %}">
  
</head>
<body>
    <header>
        <img src="/media/images/logo02.png" alt="Museum Logo" class="logo">
      
        <nav class="navigat">
            <ul>
                <li><a href="{% url 'home' %}">Home</a></li>
                <li><a href="{% url 'museum' %}">Museum</a></li>
                <li><a href="{% url 'exhibitions' %}">Exhibitions</a></li>
                <li><a href="{% url 'about' %}">About us</a></li>
                <li><a href="{% url 'news' %}">News</a></li>
                <li><a href="{% url 'contacts' %}">Contacts</a></li>
                <li><a href="{% url 'dictionary' %}">Questions</a></li>
                <li><a href="{% url 'policy' %}">Privacy Policy</a></li>
                <li><a href="{% url 'vacancies' %}">Vacancies</a></li>
                <li><a href="{% url 'reviews' %}">Reviews</a></li>
                <li><a href="{% url 'discounts' %}">Promocodes</a></li>
                {% if user.is_staff %}
                    <li><a href="{% url 'employee_positions' %}">Employee positions</a></li>
                    <li><a href="{% url 'employees' %}">Employees</a></li>
                {% endif %}
                {% if user.is_superuser %}
                    <li><a href="{% url 'clients' %}">Clients</a></li>
                {% endif %}
            </ul>
        </nav>
        
 <div class="header-controls">
     
            <div class="theme-switcher">
                <span class="theme-icon">‚òÄÔ∏è</span>
                <label class="theme-toggle">
                    <input type="checkbox" id="theme-toggle">
                    <span class="theme-slider"></span>
                </label>
                <span class="theme-icon">üåô</span>
            </div>

        <div class="auth-links">
            {% if user.is_authenticated %}
                {% if not user.is_superuser %}
                    {% if user.is_staff %}
                        <a href="{% url 'employee_profile' %}">Profile</a>
                    {% else %}
                        <a href="{% url 'client_profile' %}">Profile</a>
                    {% endif %}
                {% endif %}
                <a href="{% url 'logout' %}">Log out</a>
            {% else %}
                <a href="{% url 'login' %}">Log in</a>
                <span class="separator">|</span>
                <a href="{% url 'register' %}">Sign up</a>
            {% endif %}

            {% if user.is_authenticated and not user.is_staff and not user.is_superuser %}
                <a href="{% url 'cart' %}">
                    Cart
                    {% with items_count=request.user.client.get_active_cart_items_count %}
                        {% if items_count > 0 %}
                            <span class="cart-badge">{{ items_count }}</span>
                        {% endif %}
                    {% endwith %}
                </a>
            {% endif %}
        </div>
    </header>

    <main>
        {% block content %}
        {% endblock %}
    </main>
 
    <script>
       
        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            
            const themeIcons = document.querySelectorAll('.theme-icon');
            if (theme === 'dark') {
                themeIcons[0].textContent = '‚òÄÔ∏è';
                themeIcons[1].textContent = 'üåô';
            } else {
                themeIcons[0].textContent = '‚òÄÔ∏è';
                themeIcons[1].textContent = 'üåô';
            }
        }
       
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            applyTheme(newTheme);
        }

        document.addEventListener('DOMContentLoaded', function() {
           
            const savedTheme = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            let initialTheme = 'light';
            if (savedTheme) {
                initialTheme = savedTheme;
            } else if (systemPrefersDark) {
                initialTheme = 'dark';
            }
            
            applyTheme(initialTheme);
            
            const toggle = document.getElementById('theme-toggle');
            if (toggle) {
                toggle.checked = initialTheme === 'dark';
                toggle.addEventListener('change', toggleTheme);
            }
        });

        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            if (!localStorage.getItem('theme')) {
                applyTheme(e.matches ? 'dark' : 'light');
            }
        });
    </script>
    {% block extra_js %}{% endblock %}

</body>
</html>