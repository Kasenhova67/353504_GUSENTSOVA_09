{% extends 'layout.html' %}
{% block title %}Q&A{% endblock %}

{% block content %}
<div class="faq-container">
    {% if not user.is_staff and not user.is_superuser %}
        <h2>Add new question</h2>
        <a href="{% url 'add_question' %}" class="add-question-btn">Add question</a>
    {% endif %}
    
    <h1>Frequently Asked Questions</h1>
    
    {% for question in questions %}
        <div class="faq-item">
            <div class="faq-question">{{ question.content }}</div>
            <div class="faq-date">Added: {{ question.date|date:"F j, Y" }}</div>
            
            {% if question.answer %}
                <details class="faq-details">
                    <summary class="faq-summary">View Answer</summary>
                    <div class="faq-answer">
                        <div class="answer-content">
                            <strong>Answer:</strong> {{ question.answer.content }}
                        </div>
                        <div class="answer-date">
                            Answered: {{ question.answer.date|date:"F j, Y" }}
                        </div>
                    </div>
                </details>
            {% else %}
                {% if user.is_staff %}
                    <a href="{{ question.get_absolute_url_to_add }}" class="add-answer-btn">Add answer</a>
                {% else %}
                    <div class="no-answer">Answer not added yet</div>
                {% endif %}
            {% endif %}
        </div>
        
        {% if not forloop.last %}
            <hr class="faq-divider">
        {% endif %}
    {% endfor %}
</div>
{% endblock %}