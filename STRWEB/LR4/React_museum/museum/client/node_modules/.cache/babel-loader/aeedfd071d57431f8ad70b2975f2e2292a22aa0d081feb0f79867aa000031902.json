{"ast":null,"code":"/**\r\n * –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Ollama AI API\r\n * –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π Ollama: https://ollama.ai/\r\n * –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–æ–¥–µ–ª—å: `ollama run llama2` –∏–ª–∏ `ollama run mistral`\r\n */\n\nconst OLLAMA_API_URL = 'http://localhost:11434/api';\n\n// –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏ Ollama\nconst AVAILABLE_MODELS = ['llama2', 'mistral', 'codellama', 'vicuna', 'orca-mini'];\n\n/**\r\n * –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Ollama\r\n */\nexport const checkOllamaStatus = async () => {\n  try {\n    const response = await fetch(`${OLLAMA_API_URL}/tags`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      throw new Error('Ollama –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω');\n    }\n    const data = await response.json();\n    return {\n      available: true,\n      models: data.models || [],\n      message: 'Ollama –¥–æ—Å—Ç—É–ø–µ–Ω'\n    };\n  } catch (error) {\n    console.warn('Ollama –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:', error.message);\n    return {\n      available: false,\n      models: [],\n      message: 'Ollama –Ω–µ –∑–∞–ø—É—â–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å https://ollama.ai/'\n    };\n  }\n};\n\n/**\r\n * –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π\r\n */\nexport const getAvailableModels = async () => {\n  try {\n    const status = await checkOllamaStatus();\n    if (!status.available) {\n      return AVAILABLE_MODELS; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n    }\n    return status.models.map(model => model.name) || AVAILABLE_MODELS;\n  } catch (error) {\n    return AVAILABLE_MODELS;\n  }\n};\n\n/**\r\n * –ê–Ω–∞–ª–∏–∑ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞ —á–µ—Ä–µ–∑ Ollama\r\n */\nexport const analyzeWithOllama = async (exhibit, analysisType = 'description') => {\n  const startTime = Date.now();\n  let prompt = '';\n  let model = 'llama2'; // –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n\n  switch (analysisType) {\n    case 'description':\n      prompt = generateDescriptionPrompt(exhibit);\n      model = 'mistral'; // Mistral –ª—É—á—à–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞\n      break;\n    case 'conservation':\n      prompt = generateConservationPrompt(exhibit);\n      model = 'llama2';\n      break;\n    case 'art':\n      prompt = generateArtAnalysisPrompt(exhibit);\n      model = 'llama2';\n      break;\n    case 'history':\n      prompt = generateHistoricalContextPrompt(exhibit);\n      model = 'vicuna';\n      break;\n    default:\n      prompt = generateGeneralAnalysisPrompt(exhibit);\n  }\n  try {\n    const response = await fetch(`${OLLAMA_API_URL}/generate`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        model,\n        prompt,\n        stream: false,\n        options: {\n          temperature: 0.7,\n          top_p: 0.9,\n          top_k: 40,\n          num_predict: 500\n        }\n      })\n    });\n    if (!response.ok) {\n      throw new Error(`–û—à–∏–±–∫–∞ Ollama API: ${response.status}`);\n    }\n    const data = await response.json();\n    const endTime = Date.now();\n    return {\n      success: true,\n      content: data.response,\n      model: data.model,\n      time: endTime - startTime,\n      tokens: data.total_duration ? Math.round(data.total_duration / 1000000) : 0,\n      type: analysisType,\n      title: getAnalysisTitle(analysisType)\n    };\n  } catch (error) {\n    console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ Ollama:', error);\n\n    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ–º–æ-–æ—Ç–≤–µ—Ç –µ—Å–ª–∏ Ollama –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω\n    return {\n      success: false,\n      content: generateDemoResponse(exhibit, analysisType),\n      model: 'demo',\n      time: 100,\n      tokens: 0,\n      type: analysisType,\n      title: getAnalysisTitle(analysisType) + ' (–¥–µ–º–æ)',\n      note: 'Ollama –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å https://ollama.ai/'\n    };\n  }\n};\n\n/**\r\n * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞–Ω–∞–ª–∏–∑–∞\r\n */\nconst generateDescriptionPrompt = exhibit => {\n  return `–¢—ã - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏—Å–∫—É—Å—Å—Ç–≤–æ–≤–µ–¥ –∏ –º—É–∑–µ–π–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç. –°–æ–∑–¥–∞–π —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –º—É–∑–µ–π–Ω–æ–≥–æ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞.\n\n–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Å–ø–æ–Ω–∞—Ç–µ:\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${exhibit.name}\n–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${exhibit.category}\n–ì–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è: ${exhibit.year}\n–ú–∞—Ç–µ—Ä–∏–∞–ª—ã: ${Array.isArray(exhibit.materials) ? exhibit.materials.join(', ') : exhibit.materials}\n–¢–µ–∫—É—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ: ${exhibit.description || '–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'}\n\n–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–ø–∏—Å–∞–Ω–∏—é:\n1. –î–ª–∏–Ω–∞ 150-200 —Å–ª–æ–≤\n2. –£–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è —à–∏—Ä–æ–∫–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏\n3. –ü–æ–¥—á–µ—Ä–∫–Ω–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å\n4. –†–∞—Å—Å–∫–∞–∂–∏ –æ —Ç–µ—Ö–Ω–∏–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è\n5. –î–æ–±–∞–≤—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã\n6. –ò—Å–ø–æ–ª—å–∑—É–π –∂–∏–≤—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –º–µ—Ç–∞—Ñ–æ—Ä—ã\n\n–ù–∞–ø–∏—à–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.`;\n};\nconst generateConservationPrompt = exhibit => {\n  return `–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏–∏ –∏ —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏–∏ –º—É–∑–µ–π–Ω—ã—Ö —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞ –∏ –¥–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.\n\n–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Å–ø–æ–Ω–∞—Ç–µ:\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${exhibit.name}\n–ì–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è: ${exhibit.year}\n–ú–∞—Ç–µ—Ä–∏–∞–ª—ã: ${Array.isArray(exhibit.materials) ? exhibit.materials.join(', ') : exhibit.materials}\n–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: ${exhibit.conservationState || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}\n\n–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–ª–µ–¥—É—é—â–∏–µ –∞—Å–ø–µ–∫—Ç—ã:\n1. –û—Ü–µ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–æ—Ç 1 –¥–æ 10)\n2. –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤\n3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Å–ª–æ–≤–∏—è–º —Ö—Ä–∞–Ω–µ–Ω–∏—è\n4. –ü–ª–∞–Ω –∫–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\n5. –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏–∏\n\n–û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ–º —Å—Ç–∏–ª–µ.`;\n};\nconst generateArtAnalysisPrompt = exhibit => {\n  return `–¢—ã - –≤–µ–¥—É—â–∏–π –∏—Å–∫—É—Å—Å—Ç–≤–æ–≤–µ–¥ —Å 20-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º. –ü—Ä–æ–≤–µ–¥–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏—Å–∫—É—Å—Å—Ç–≤–∞.\n\n–≠–∫—Å–ø–æ–Ω–∞—Ç: ${exhibit.name}\n–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${exhibit.category}\n–ü–µ—Ä–∏–æ–¥: ${exhibit.year}\n\n–ü—Ä–æ–≤–µ–¥–∏ –∞–Ω–∞–ª–∏–∑ –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º:\n1. –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å –∏ –ø–µ—Ä–∏–æ–¥\n2. –¢–µ—Ö–Ω–∏–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ\n3. –°–∏–º–≤–æ–ª–∏–∫–∞ –∏ —Å–∫—Ä—ã—Ç—ã–µ —Å–º—ã—Å–ª—ã\n4. –ö—É–ª—å—Ç—É—Ä–Ω–æ-–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç\n5. –ú–µ—Å—Ç–æ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∏—Å–∫—É—Å—Å—Ç–≤–∞\n6. –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–∫–æ–ª–µ–Ω–∏—è\n\n–ë—É–¥—å —Ç–æ—á–µ–Ω, –Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–µ—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏. –ü–∏—à–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.`;\n};\nconst generateHistoricalContextPrompt = exhibit => {\n  return `–¢—ã - –∏—Å—Ç–æ—Ä–∏–∫, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π –∫—É–ª—å—Ç—É—Ä–µ. –ü–æ–º–µ—Å—Ç–∏ —ç–∫—Å–ø–æ–Ω–∞—Ç –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.\n\n–≠–∫—Å–ø–æ–Ω–∞—Ç: ${exhibit.name}\n–î–∞—Ç–∞: ${exhibit.year}\n\n–†–∞—Å—Å–∫–∞–∂–∏:\n1. –ö–∞–∫–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏ –≤ —ç—Ç–æ –≤—Ä–µ–º—è?\n2. –ö–∞–∫–æ–≤–∞ –±—ã–ª–∞ —Å–æ—Ü–∏–∞–ª—å–Ω–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è?\n3. –ö–∞–∫–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è?\n4. –ö—Ç–æ –º–æ–≥ –±—ã—Ç—å —Å–æ–∑–¥–∞—Ç–µ–ª–µ–º/–≤–ª–∞–¥–µ–ª—å—Ü–µ–º?\n5. –ö–∞–∫ –ø—Ä–µ–¥–º–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ –±—ã—Ç—É/—Ä–∏—Ç—É–∞–ª–µ?\n6. –ö–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–Ω –∏–º–µ–ª –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∏–∫–æ–≤?\n\n–ò—Å–ø–æ–ª—å–∑—É–π –Ω–∞—É—á–Ω—ã–π, –Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π —è–∑—ã–∫. –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º.`;\n};\nconst generateGeneralAnalysisPrompt = exhibit => {\n  return `–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –º—É–∑–µ–π–Ω—ã–π —ç–∫—Å–ø–æ–Ω–∞—Ç –∫–∞–∫ —ç–∫—Å–ø–µ—Ä—Ç –≤ —Å–≤–æ–µ–π –æ–±–ª–∞—Å—Ç–∏.\n\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${exhibit.name}\n–û–ø–∏—Å–∞–Ω–∏–µ: ${exhibit.description || '–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'}\n–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${exhibit.category}\n\n–î–∞–π—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –∞–Ω–∞–ª–∏–∑, –≤–∫–ª—é—á–∞—è:\n- –ó–Ω–∞—á–µ–Ω–∏–µ –∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å\n- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏\n- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç\n- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —ç–∫—Å–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é\n\n–ü–∏—à–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.`;\n};\n\n/**\r\n * –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞–Ω–∞–ª–∏–∑–∞\r\n */\nconst getAnalysisTitle = type => {\n  const titles = {\n    description: 'üìù AI-–æ–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞',\n    conservation: 'üõ°Ô∏è –ê–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏',\n    art: 'üé® –ò—Å–∫—É—Å—Å—Ç–≤–æ–≤–µ–¥—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑',\n    history: 'üìú –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç'\n  };\n  return titles[type] || 'ü§ñ AI –∞–Ω–∞–ª–∏–∑';\n};\n\n/**\r\n * –î–µ–º–æ-–æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–ª—É—á–∞–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Ollama\r\n */\nconst generateDemoResponse = (exhibit, type) => {\n  const baseResponse = `–≠—Ç–æ –¥–µ–º–æ-–æ—Ç–≤–µ—Ç, —Ç–∞–∫ –∫–∞–∫ Ollama AI –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω.\\n\\n`;\n  switch (type) {\n    case 'description':\n      return baseResponse + `–≠–∫—Å–ø–æ–Ω–∞—Ç \"${exhibit.name}\" –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑–µ—Ü ${exhibit.category}. –°–æ–∑–¥–∞–Ω–Ω—ã–π –≤ ${exhibit.year} –≥–æ–¥—É, –æ–Ω –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—ã—Å–æ–∫–æ–µ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è. –í —Ä–µ–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ AI.`;\n    case 'conservation':\n      return baseResponse + `–î–ª—è —ç–∫—Å–ø–æ–Ω–∞—Ç–∞ \"${exhibit.name}\" —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å–ª–æ–≤–∏–π —Ö—Ä–∞–Ω–µ–Ω–∏—è. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º Ollama AI –±—É–¥–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å—Å—è –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏–∏.`;\n    default:\n      return baseResponse + `–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ollama —Å https://ollama.ai/ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è AI-–∞–Ω–∞–ª–∏–∑–∞ —ç–∫—Å–ø–æ–Ω–∞—Ç–æ–≤.`;\n  }\n};\n\n/**\r\n * –°—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ –æ—Ç Ollama (–¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏)\r\n */\nexport const streamOllamaResponse = async (prompt, model = 'llama2', onChunk) => {\n  try {\n    const response = await fetch(`${OLLAMA_API_URL}/generate`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        model,\n        prompt,\n        stream: true,\n        options: {\n          temperature: 0.7\n        }\n      })\n    });\n    if (!response.ok) {\n      throw new Error('–û—à–∏–±–∫–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞');\n    }\n    const reader = response.body.getReader();\n    const decoder = new TextDecoder();\n    let fullResponse = '';\n    while (true) {\n      const {\n        done,\n        value\n      } = await reader.read();\n      if (done) break;\n      const chunk = decoder.decode(value);\n      const lines = chunk.split('\\n').filter(line => line.trim());\n      for (const line of lines) {\n        try {\n          const data = JSON.parse(line);\n          if (data.response) {\n            fullResponse += data.response;\n            if (onChunk) {\n              onChunk(data.response, fullResponse);\n            }\n          }\n        } catch (e) {\n          // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON\n        }\n      }\n    }\n    return fullResponse;\n  } catch (error) {\n    console.error('–û—à–∏–±–∫–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ Ollama:', error);\n    throw error;\n  }\n};\n\n/**\r\n * –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞ —Å Ollama (–º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π)\r\n */\nexport const chatWithOllama = async (messages, model = 'llama2') => {\n  const formattedMessages = messages.map(msg => ({\n    role: msg.role,\n    content: msg.content\n  }));\n  try {\n    const response = await fetch(`${OLLAMA_API_URL}/chat`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        model,\n        messages: formattedMessages,\n        stream: false,\n        options: {\n          temperature: 0.7\n        }\n      })\n    });\n    if (!response.ok) {\n      throw new Error('–û—à–∏–±–∫–∞ —á–∞—Ç–∞ —Å Ollama');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('–û—à–∏–±–∫–∞ —á–∞—Ç–∞ —Å Ollama:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["OLLAMA_API_URL","AVAILABLE_MODELS","checkOllamaStatus","response","fetch","method","headers","ok","Error","data","json","available","models","message","error","console","warn","getAvailableModels","status","map","model","name","analyzeWithOllama","exhibit","analysisType","startTime","Date","now","prompt","generateDescriptionPrompt","generateConservationPrompt","generateArtAnalysisPrompt","generateHistoricalContextPrompt","generateGeneralAnalysisPrompt","body","JSON","stringify","stream","options","temperature","top_p","top_k","num_predict","endTime","success","content","time","tokens","total_duration","Math","round","type","title","getAnalysisTitle","generateDemoResponse","note","category","year","Array","isArray","materials","join","description","conservationState","titles","conservation","art","history","baseResponse","streamOllamaResponse","onChunk","reader","getReader","decoder","TextDecoder","fullResponse","done","value","read","chunk","decode","lines","split","filter","line","trim","parse","e","chatWithOllama","messages","formattedMessages","msg","role"],"sources":["C:/Users/user/React_museum/museum/client/src/components/ollamaService.js"],"sourcesContent":["/**\r\n * –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Ollama AI API\r\n * –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π Ollama: https://ollama.ai/\r\n * –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–æ–¥–µ–ª—å: `ollama run llama2` –∏–ª–∏ `ollama run mistral`\r\n */\r\n\r\nconst OLLAMA_API_URL = 'http://localhost:11434/api';\r\n\r\n// –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏ Ollama\r\nconst AVAILABLE_MODELS = [\r\n  'llama2',\r\n  'mistral',\r\n  'codellama',\r\n  'vicuna',\r\n  'orca-mini'\r\n];\r\n\r\n/**\r\n * –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Ollama\r\n */\r\nexport const checkOllamaStatus = async () => {\r\n  try {\r\n    const response = await fetch(`${OLLAMA_API_URL}/tags`, {\r\n      method: 'GET',\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Ollama –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω');\r\n    }\r\n    \r\n    const data = await response.json();\r\n    return {\r\n      available: true,\r\n      models: data.models || [],\r\n      message: 'Ollama –¥–æ—Å—Ç—É–ø–µ–Ω'\r\n    };\r\n  } catch (error) {\r\n    console.warn('Ollama –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:', error.message);\r\n    return {\r\n      available: false,\r\n      models: [],\r\n      message: 'Ollama –Ω–µ –∑–∞–ø—É—â–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å https://ollama.ai/'\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π\r\n */\r\nexport const getAvailableModels = async () => {\r\n  try {\r\n    const status = await checkOllamaStatus();\r\n    if (!status.available) {\r\n      return AVAILABLE_MODELS; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\r\n    }\r\n    return status.models.map(model => model.name) || AVAILABLE_MODELS;\r\n  } catch (error) {\r\n    return AVAILABLE_MODELS;\r\n  }\r\n};\r\n\r\n/**\r\n * –ê–Ω–∞–ª–∏–∑ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞ —á–µ—Ä–µ–∑ Ollama\r\n */\r\nexport const analyzeWithOllama = async (exhibit, analysisType = 'description') => {\r\n  const startTime = Date.now();\r\n  \r\n  let prompt = '';\r\n  let model = 'llama2'; // –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\r\n  \r\n  switch (analysisType) {\r\n    case 'description':\r\n      prompt = generateDescriptionPrompt(exhibit);\r\n      model = 'mistral'; // Mistral –ª—É—á—à–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞\r\n      break;\r\n    \r\n    case 'conservation':\r\n      prompt = generateConservationPrompt(exhibit);\r\n      model = 'llama2';\r\n      break;\r\n    \r\n    case 'art':\r\n      prompt = generateArtAnalysisPrompt(exhibit);\r\n      model = 'llama2';\r\n      break;\r\n    \r\n    case 'history':\r\n      prompt = generateHistoricalContextPrompt(exhibit);\r\n      model = 'vicuna';\r\n      break;\r\n    \r\n    default:\r\n      prompt = generateGeneralAnalysisPrompt(exhibit);\r\n  }\r\n  \r\n  try {\r\n    const response = await fetch(`${OLLAMA_API_URL}/generate`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        model,\r\n        prompt,\r\n        stream: false,\r\n        options: {\r\n          temperature: 0.7,\r\n          top_p: 0.9,\r\n          top_k: 40,\r\n          num_predict: 500\r\n        }\r\n      })\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`–û—à–∏–±–∫–∞ Ollama API: ${response.status}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    const endTime = Date.now();\r\n    \r\n    return {\r\n      success: true,\r\n      content: data.response,\r\n      model: data.model,\r\n      time: endTime - startTime,\r\n      tokens: data.total_duration ? Math.round(data.total_duration / 1000000) : 0,\r\n      type: analysisType,\r\n      title: getAnalysisTitle(analysisType)\r\n    };\r\n    \r\n  } catch (error) {\r\n    console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ Ollama:', error);\r\n    \r\n    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ–º–æ-–æ—Ç–≤–µ—Ç –µ—Å–ª–∏ Ollama –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω\r\n    return {\r\n      success: false,\r\n      content: generateDemoResponse(exhibit, analysisType),\r\n      model: 'demo',\r\n      time: 100,\r\n      tokens: 0,\r\n      type: analysisType,\r\n      title: getAnalysisTitle(analysisType) + ' (–¥–µ–º–æ)',\r\n      note: 'Ollama –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å https://ollama.ai/'\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞–Ω–∞–ª–∏–∑–∞\r\n */\r\nconst generateDescriptionPrompt = (exhibit) => {\r\n  return `–¢—ã - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏—Å–∫—É—Å—Å—Ç–≤–æ–≤–µ–¥ –∏ –º—É–∑–µ–π–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç. –°–æ–∑–¥–∞–π —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –º—É–∑–µ–π–Ω–æ–≥–æ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞.\r\n\r\n–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Å–ø–æ–Ω–∞—Ç–µ:\r\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${exhibit.name}\r\n–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${exhibit.category}\r\n–ì–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è: ${exhibit.year}\r\n–ú–∞—Ç–µ—Ä–∏–∞–ª—ã: ${Array.isArray(exhibit.materials) ? exhibit.materials.join(', ') : exhibit.materials}\r\n–¢–µ–∫—É—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ: ${exhibit.description || '–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'}\r\n\r\n–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–ø–∏—Å–∞–Ω–∏—é:\r\n1. –î–ª–∏–Ω–∞ 150-200 —Å–ª–æ–≤\r\n2. –£–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è —à–∏—Ä–æ–∫–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏\r\n3. –ü–æ–¥—á–µ—Ä–∫–Ω–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å\r\n4. –†–∞—Å—Å–∫–∞–∂–∏ –æ —Ç–µ—Ö–Ω–∏–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è\r\n5. –î–æ–±–∞–≤—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã\r\n6. –ò—Å–ø–æ–ª—å–∑—É–π –∂–∏–≤—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –º–µ—Ç–∞—Ñ–æ—Ä—ã\r\n\r\n–ù–∞–ø–∏—à–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.`;\r\n};\r\n\r\nconst generateConservationPrompt = (exhibit) => {\r\n  return `–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏–∏ –∏ —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏–∏ –º—É–∑–µ–π–Ω—ã—Ö —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞ –∏ –¥–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.\r\n\r\n–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Å–ø–æ–Ω–∞—Ç–µ:\r\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${exhibit.name}\r\n–ì–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è: ${exhibit.year}\r\n–ú–∞—Ç–µ—Ä–∏–∞–ª—ã: ${Array.isArray(exhibit.materials) ? exhibit.materials.join(', ') : exhibit.materials}\r\n–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: ${exhibit.conservationState || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}\r\n\r\n–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–ª–µ–¥—É—é—â–∏–µ –∞—Å–ø–µ–∫—Ç—ã:\r\n1. –û—Ü–µ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–æ—Ç 1 –¥–æ 10)\r\n2. –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤\r\n3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Å–ª–æ–≤–∏—è–º —Ö—Ä–∞–Ω–µ–Ω–∏—è\r\n4. –ü–ª–∞–Ω –∫–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\r\n5. –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏–∏\r\n\r\n–û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ–º —Å—Ç–∏–ª–µ.`;\r\n};\r\n\r\nconst generateArtAnalysisPrompt = (exhibit) => {\r\n  return `–¢—ã - –≤–µ–¥—É—â–∏–π –∏—Å–∫—É—Å—Å—Ç–≤–æ–≤–µ–¥ —Å 20-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º. –ü—Ä–æ–≤–µ–¥–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏—Å–∫—É—Å—Å—Ç–≤–∞.\r\n\r\n–≠–∫—Å–ø–æ–Ω–∞—Ç: ${exhibit.name}\r\n–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${exhibit.category}\r\n–ü–µ—Ä–∏–æ–¥: ${exhibit.year}\r\n\r\n–ü—Ä–æ–≤–µ–¥–∏ –∞–Ω–∞–ª–∏–∑ –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º:\r\n1. –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å –∏ –ø–µ—Ä–∏–æ–¥\r\n2. –¢–µ—Ö–Ω–∏–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ\r\n3. –°–∏–º–≤–æ–ª–∏–∫–∞ –∏ —Å–∫—Ä—ã—Ç—ã–µ —Å–º—ã—Å–ª—ã\r\n4. –ö—É–ª—å—Ç—É—Ä–Ω–æ-–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç\r\n5. –ú–µ—Å—Ç–æ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∏—Å–∫—É—Å—Å—Ç–≤–∞\r\n6. –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–∫–æ–ª–µ–Ω–∏—è\r\n\r\n–ë—É–¥—å —Ç–æ—á–µ–Ω, –Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–µ—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏. –ü–∏—à–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.`;\r\n};\r\n\r\nconst generateHistoricalContextPrompt = (exhibit) => {\r\n  return `–¢—ã - –∏—Å—Ç–æ—Ä–∏–∫, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π –∫—É–ª—å—Ç—É—Ä–µ. –ü–æ–º–µ—Å—Ç–∏ —ç–∫—Å–ø–æ–Ω–∞—Ç –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.\r\n\r\n–≠–∫—Å–ø–æ–Ω–∞—Ç: ${exhibit.name}\r\n–î–∞—Ç–∞: ${exhibit.year}\r\n\r\n–†–∞—Å—Å–∫–∞–∂–∏:\r\n1. –ö–∞–∫–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏ –≤ —ç—Ç–æ –≤—Ä–µ–º—è?\r\n2. –ö–∞–∫–æ–≤–∞ –±—ã–ª–∞ —Å–æ—Ü–∏–∞–ª—å–Ω–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è?\r\n3. –ö–∞–∫–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è?\r\n4. –ö—Ç–æ –º–æ–≥ –±—ã—Ç—å —Å–æ–∑–¥–∞—Ç–µ–ª–µ–º/–≤–ª–∞–¥–µ–ª—å—Ü–µ–º?\r\n5. –ö–∞–∫ –ø—Ä–µ–¥–º–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ –±—ã—Ç—É/—Ä–∏—Ç—É–∞–ª–µ?\r\n6. –ö–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–Ω –∏–º–µ–ª –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∏–∫–æ–≤?\r\n\r\n–ò—Å–ø–æ–ª—å–∑—É–π –Ω–∞—É—á–Ω—ã–π, –Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π —è–∑—ã–∫. –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º.`;\r\n};\r\n\r\nconst generateGeneralAnalysisPrompt = (exhibit) => {\r\n  return `–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –º—É–∑–µ–π–Ω—ã–π —ç–∫—Å–ø–æ–Ω–∞—Ç –∫–∞–∫ —ç–∫—Å–ø–µ—Ä—Ç –≤ —Å–≤–æ–µ–π –æ–±–ª–∞—Å—Ç–∏.\r\n\r\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${exhibit.name}\r\n–û–ø–∏—Å–∞–Ω–∏–µ: ${exhibit.description || '–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'}\r\n–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${exhibit.category}\r\n\r\n–î–∞–π—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –∞–Ω–∞–ª–∏–∑, –≤–∫–ª—é—á–∞—è:\r\n- –ó–Ω–∞—á–µ–Ω–∏–µ –∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å\r\n- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏\r\n- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç\r\n- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —ç–∫—Å–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é\r\n\r\n–ü–∏—à–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.`;\r\n};\r\n\r\n/**\r\n * –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞–Ω–∞–ª–∏–∑–∞\r\n */\r\nconst getAnalysisTitle = (type) => {\r\n  const titles = {\r\n    description: 'üìù AI-–æ–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞',\r\n    conservation: 'üõ°Ô∏è –ê–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏',\r\n    art: 'üé® –ò—Å–∫—É—Å—Å—Ç–≤–æ–≤–µ–¥—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑',\r\n    history: 'üìú –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç'\r\n  };\r\n  return titles[type] || 'ü§ñ AI –∞–Ω–∞–ª–∏–∑';\r\n};\r\n\r\n/**\r\n * –î–µ–º–æ-–æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–ª—É—á–∞–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Ollama\r\n */\r\nconst generateDemoResponse = (exhibit, type) => {\r\n  const baseResponse = `–≠—Ç–æ –¥–µ–º–æ-–æ—Ç–≤–µ—Ç, —Ç–∞–∫ –∫–∞–∫ Ollama AI –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω.\\n\\n`;\r\n  \r\n  switch (type) {\r\n    case 'description':\r\n      return baseResponse + `–≠–∫—Å–ø–æ–Ω–∞—Ç \"${exhibit.name}\" –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑–µ—Ü ${exhibit.category}. –°–æ–∑–¥–∞–Ω–Ω—ã–π –≤ ${exhibit.year} –≥–æ–¥—É, –æ–Ω –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—ã—Å–æ–∫–æ–µ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è. –í —Ä–µ–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ AI.`;\r\n    \r\n    case 'conservation':\r\n      return baseResponse + `–î–ª—è —ç–∫—Å–ø–æ–Ω–∞—Ç–∞ \"${exhibit.name}\" —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å–ª–æ–≤–∏–π —Ö—Ä–∞–Ω–µ–Ω–∏—è. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º Ollama AI –±—É–¥–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å—Å—è –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏–∏.`;\r\n    \r\n    default:\r\n      return baseResponse + `–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ollama —Å https://ollama.ai/ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è AI-–∞–Ω–∞–ª–∏–∑–∞ —ç–∫—Å–ø–æ–Ω–∞—Ç–æ–≤.`;\r\n  }\r\n};\r\n\r\n/**\r\n * –°—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ –æ—Ç Ollama (–¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏)\r\n */\r\nexport const streamOllamaResponse = async (prompt, model = 'llama2', onChunk) => {\r\n  try {\r\n    const response = await fetch(`${OLLAMA_API_URL}/generate`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        model,\r\n        prompt,\r\n        stream: true,\r\n        options: {\r\n          temperature: 0.7\r\n        }\r\n      })\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('–û—à–∏–±–∫–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞');\r\n    }\r\n    \r\n    const reader = response.body.getReader();\r\n    const decoder = new TextDecoder();\r\n    let fullResponse = '';\r\n    \r\n    while (true) {\r\n      const { done, value } = await reader.read();\r\n      if (done) break;\r\n      \r\n      const chunk = decoder.decode(value);\r\n      const lines = chunk.split('\\n').filter(line => line.trim());\r\n      \r\n      for (const line of lines) {\r\n        try {\r\n          const data = JSON.parse(line);\r\n          if (data.response) {\r\n            fullResponse += data.response;\r\n            if (onChunk) {\r\n              onChunk(data.response, fullResponse);\r\n            }\r\n          }\r\n        } catch (e) {\r\n          // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON\r\n        }\r\n      }\r\n    }\r\n    \r\n    return fullResponse;\r\n  } catch (error) {\r\n    console.error('–û—à–∏–±–∫–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ Ollama:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞ —Å Ollama (–º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π)\r\n */\r\nexport const chatWithOllama = async (messages, model = 'llama2') => {\r\n  const formattedMessages = messages.map(msg => ({\r\n    role: msg.role,\r\n    content: msg.content\r\n  }));\r\n  \r\n  try {\r\n    const response = await fetch(`${OLLAMA_API_URL}/chat`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        model,\r\n        messages: formattedMessages,\r\n        stream: false,\r\n        options: {\r\n          temperature: 0.7\r\n        }\r\n      })\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('–û—à–∏–±–∫–∞ —á–∞—Ç–∞ —Å Ollama');\r\n    }\r\n    \r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('–û—à–∏–±–∫–∞ —á–∞—Ç–∞ —Å Ollama:', error);\r\n    throw error;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}