<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Игрушки — два варианта наследования</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    form { margin-bottom: 15px; padding: 10px; border: 1px solid #ccc; }
    input { margin: 5px; padding: 5px; }
    h2 { margin-top: 30px; color: #333; }
    ul { margin: 10px 0; }
    label { margin-right: 15px; }
    .toy-section { margin-bottom: 30px; }
  </style>
</head>
<body>

<h1>Управление игрушками — два варианта наследования</h1>

<label>
  <input type="radio" name="mode" value="proto" checked> Прототипное наследование
</label>
<label>
  <input type="radio" name="mode" value="class"> Class / Extends
</label>



<div id="formProto" class="toy-section">
  <h2>Прототипное наследование</h2>
  
  <form id="toyFormProto">
    <h3>Добавить игрушку:</h3>
    <input type="text" id="nameProto" placeholder="Название" required>
    <input type="number" id="priceProto" placeholder="Цена (₽)" required>
    <input type="number" id="ageFromProto" placeholder="Возраст от" required>
    <input type="number" id="ageToProto" placeholder="Возраст до" required>
    <input type="text" id="materialProto" placeholder="Материал (для расширенной игрушки)">
    <button type="submit">Добавить игрушку</button>
  </form>

  <h3>Все игрушки:</h3>
  <ul id="toyListProto"></ul>

  <h3>Самые дорогие игрушки (отличаются от максимальной цены не более чем на 1₽):</h3>
  <ul id="expensiveProto"></ul>
</div>



<div id="formClass" class="toy-section" style="display:none;">
  <h2>Class / Extends</h2>
  
  <form id="toyFormClass">
    <h3>Добавить игрушку:</h3>
    <input type="text" id="nameClass" placeholder="Название" required>
    <input type="number" id="priceClass" placeholder="Цена (₽)" required>
    <input type="number" id="ageFromClass" placeholder="Возраст от" required>
    <input type="number" id="ageToClass" placeholder="Возраст до" required>
    <input type="text" id="materialClass" placeholder="Материал (для расширенной игрушки)">
    <button type="submit">Добавить игрушку</button>
  </form>

  <h3>Все игрушки:</h3>
  <ul id="toyListClass"></ul>

  <h3>Самые дорогие игрушки (отличаются от максимальной цены не более чем на 1₽):</h3>
  <ul id="expensiveClass"></ul>
</div>

<script>

document.querySelectorAll('input[name="mode"]').forEach(radio => {
  radio.addEventListener('change', e => {
    document.getElementById('formProto').style.display = e.target.value === 'proto' ? 'block' : 'none';
    document.getElementById('formClass').style.display = e.target.value === 'class' ? 'block' : 'none';
  });
});


function Toy(name, price, ageFrom, ageTo) {
  this._name = name;
  this._price = price;
  this._ageFrom = ageFrom;
  this._ageTo = ageTo;
}

Toy.prototype.getName = function() { return this._name; };
Toy.prototype.setName = function(name) { this._name = name; };

Toy.prototype.getPrice = function() { return this._price; };
Toy.prototype.setPrice = function(price) { this._price = price; };

Toy.prototype.getAgeFrom = function() { return this._ageFrom; };
Toy.prototype.setAgeFrom = function(ageFrom) { this._ageFrom = ageFrom; };

Toy.prototype.getAgeTo = function() { return this._ageTo; };
Toy.prototype.setAgeTo = function(ageTo) { this._ageTo = ageTo; };

Toy.prototype.describe = function() {
  return `${this._name} (${this._price}₽) для детей от ${this._ageFrom} до ${this._ageTo} лет`;
};

Toy.displayAllToys = function(toysArray, elementId) {
  const list = document.getElementById(elementId);
  list.innerHTML = '';
  toysArray.forEach((toy, index) => {
    const li = document.createElement('li');
    li.textContent = `${index + 1}. ${toy.describe()}`;
    list.appendChild(li);
  });
};

Toy.displayMostExpensive = function(toysArray, elementId) {
  const list = document.getElementById(elementId);
  list.innerHTML = '';
  
  if (toysArray.length === 0) {
    const li = document.createElement('li');
    li.textContent = 'Нет игрушек для анализа';
    list.appendChild(li);
    return;
  }
  
  const maxPrice = Math.max(...toysArray.map(toy => toy.getPrice()));
  const expensiveToys = toysArray.filter(toy => Math.abs(toy.getPrice() - maxPrice) <= 1);
  
  expensiveToys.forEach(toy => {
    const li = document.createElement('li');
    li.textContent = `${toy.getName()} - ${toy.getPrice()}₽`;
    list.appendChild(li);
  });
};


function AdvancedToy(name, price, ageFrom, ageTo, material) {
  Toy.call(this, name, price, ageFrom, ageTo);
  this._material = material;
}

AdvancedToy.prototype = Object.create(Toy.prototype);
AdvancedToy.prototype.constructor = AdvancedToy;

AdvancedToy.prototype.getMaterial = function() { 
  return this._material || 'не указан'; 
};
AdvancedToy.prototype.setMaterial = function(material) { 
  this._material = material; 
};

AdvancedToy.prototype.describe = function() {
  return `${this._name} (${this._price}₽) для детей от ${this._ageFrom} до ${this._ageTo} лет, материал: ${this.getMaterial()}`;
};

const toysProto = [];

document.getElementById('toyFormProto').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const name = document.getElementById('nameProto').value;
  const price = parseInt(document.getElementById('priceProto').value);
  const ageFrom = parseInt(document.getElementById('ageFromProto').value);
  const ageTo = parseInt(document.getElementById('ageToProto').value);
  const material = document.getElementById('materialProto').value;
  
  let toy;
  if (material.trim()) {
    toy = new AdvancedToy(name, price, ageFrom, ageTo, material);
  } else {
    toy = new Toy(name, price, ageFrom, ageTo);
  }
  
  toysProto.push(toy);
  
  this.reset();
  
  renderToysProto();
});

function renderToysProto() {
  Toy.displayAllToys(toysProto, 'toyListProto');
  Toy.displayMostExpensive(toysProto, 'expensiveProto');
}

//
class ToyClass {
  constructor(name, price, ageFrom, ageTo) {
    this._name = name;
    this._price = price;
    this._ageFrom = ageFrom;
    this._ageTo = ageTo;
  }

  getName() { return this._name; }
  setName(name) { this._name = name; }

  getPrice() { return this._price; }
  setPrice(price) { this._price = price; }

  getAgeFrom() { return this._ageFrom; }
  setAgeFrom(ageFrom) { this._ageFrom = ageFrom; }

  getAgeTo() { return this._ageTo; }
  setAgeTo(ageTo) { this._ageTo = ageTo; }

  describe() {
    return `${this._name} (${this._price}₽) для детей от ${this._ageFrom} до ${this._ageTo} лет`;
  }

  static displayAllToys(toysArray, elementId) {
    const list = document.getElementById(elementId);
    list.innerHTML = '';
    toysArray.forEach((toy, index) => {
      const li = document.createElement('li');
      li.textContent = `${index + 1}. ${toy.describe()}`;
      list.appendChild(li);
    });
  }

  static displayMostExpensive(toysArray, elementId) {
    const list = document.getElementById(elementId);
    list.innerHTML = '';
    
    if (toysArray.length === 0) {
      const li = document.createElement('li');
      li.textContent = 'Нет игрушек для анализа';
      list.appendChild(li);
      return;
    }
    
    const maxPrice = Math.max(...toysArray.map(toy => toy.getPrice()));
    const expensiveToys = toysArray.filter(toy => Math.abs(toy.getPrice() - maxPrice) <= 1);
    
    expensiveToys.forEach(toy => {
      const li = document.createElement('li');
      li.textContent = `${toy.getName()} - ${toy.getPrice()}₽`;
      list.appendChild(li);
    });
  }
}

class AdvancedToyClass extends ToyClass {
  constructor(name, price, ageFrom, ageTo, material) {
    super(name, price, ageFrom, ageTo);
    this._material = material;
  }

  getMaterial() { 
    return this._material || 'не указан'; 
  }
  setMaterial(material) { 
    this._material = material; 
  }

  describe() {
    return `${this._name} (${this._price}₽) для детей от ${this._ageFrom} до ${this._ageTo} лет, материал: ${this.getMaterial()}`;
  }
}

const toysClass = [];

document.getElementById('toyFormClass').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const name = document.getElementById('nameClass').value;
  const price = parseInt(document.getElementById('priceClass').value);
  const ageFrom = parseInt(document.getElementById('ageFromClass').value);
  const ageTo = parseInt(document.getElementById('ageToClass').value);
  const material = document.getElementById('materialClass').value;
  
  let toy;
  if (material.trim()) {
    toy = new AdvancedToyClass(name, price, ageFrom, ageTo, material);
  } else {
    toy = new ToyClass(name, price, ageFrom, ageTo);
  }
  
  toysClass.push(toy);
  
  this.reset();
  
  renderToysClass();
});

function renderToysClass() {
  ToyClass.displayAllToys(toysClass, 'toyListClass');
  ToyClass.displayMostExpensive(toysClass, 'expensiveClass');
}

</script>
</body>
</html>